# Домашнее задание к занятию "5.3. Контейнеризация на примере Docker"

## Задача 1 

####Посмотрите на сценарий ниже и ответьте на вопрос:
####"Подходит ли в этом сценарии использование докера? Или лучше подойдет виртуальная машина, физическая машина? Или возможны разные варианты?"

####Детально опишите и обоснуйте свой выбор.

--

####Сценарий:

- ####Высоконагруженное монолитное java веб-приложение; 
  Виртуальные машины для более высокой скорости работы и возможностью масштабирования
- ####Go-микросервис для генерации отчетов;
  Docker - запустили, сгенерировали, потушили.
- ####Nodejs веб-приложение;
  Docker - много зависимостей, которые будут изолированы. Нет спец требований. Stateless приложение
- ####Мобильное приложение c версиями для Android и iOS;
  Для iOS думаю свои инструменты и виртуализация и т.д. Под Android можно в Docker, но есть вопросы с правами
- ####База данных postgresql используемая, как кэш;
  Если как кеш, то Docker т.к. не надо хранить состояния. Иначе на железке как правило
- ####Шина данных на базе Apache Kafka;
  Docker - Stateless
- ####Очередь для Logstash на базе Redis;
  Docker - Stateless
- ####Elastic stack для реализации логирования продуктивного веб-приложения - три ноды elasticsearch, два logstash и две ноды kibana;
  Docker. В docker swarm или k8s
- ####Мониторинг-стек на базе prometheus и grafana;
  Пишут что настривают и проблем нет в Docker, хотя меня смужает необходимость хранения метрик
- ####Mongodb, как основное хранилище данных для java-приложения;
  БД лучше запускать на железе
- ####Jenkins-сервер.
  На сайте jenkins пишут что проблем с этим нет - запускайте в Docker
## Задача 2 

Сценарий выполения задачи:

- создайте свой репозиторий на докерхаб; 
- выберете любой образ, который содержит апачи веб-сервер;
- создайте свой форк образа;
- реализуйте функциональность: 
запуск веб-сервера в фоне с индекс-страницей, содержащей HTML-код ниже: 
```
<html>
<head>
Hey, Netology
</head>
<body>
<h1>I’m kinda DevOps now</h1>
</body>
</html>
```
####Опубликуйте созданный форк в своем репозитории и предоставьте ответ в виде ссылки на докерхаб-репо.

`docker pull httpd:latest`   
`docker run -d --name httpd -p 8080:80 httpd`  
`docker exec -it httpd bash`  
Отредатируем /usr/local/apache2/htdocs/index.html  
`docker commit -a "Vitali Dzmitrenka" -m "Change index page" -p httpd dzvi/netology:latest`  
`docker login`  
`docker push dzvi/netology:latest`

[Созданный репозиторий с образом](https://hub.docker.com/r/dzvi/netology/tags?page=1&ordering=last_upd)

## Задача 3 

- ####Запустите первый контейнер из образа centos c любым тэгом в фоновом режиме, подключив папку info из текущей рабочей директории на хостовой машине в /share/info контейнера;
- ####Запустите второй контейнер из образа debian:latest в фоновом режиме, подключив папку info из текущей рабочей директории на хостовой машине в /info контейнера;
- ####Подключитесь к первому контейнеру с помощью exec и создайте текстовый файл любого содержания в /share/info ;
- ####Добавьте еще один файл в папку info на хостовой машине;
- ####Подключитесь во второй контейнер и отобразите листинг и содержание файлов в /info контейнера.

`docker run --rm -t -d --name centos -v "$(pwd)"/info:/share/info centos:latest`
`docker run --rm -t -d --name debian -v "$(pwd)"/info:/info debian:latest`
Добавляем в centos - centos.txt и host.txt на локальной машине, заходим в debian и видим 2 наших файла.  
Если не указать абсолютный путь к папке на локальной машине в параметре `-v`, докер будет воспринимать относительный путь как имя нового volume и создаст его, 
который физически будет примонтирован к другой папке - `/var/lib/docker/volumes/something`. Поэтому мы не увидим файлы из контейнера в папке (к которой хотели примонтироваться) на машине, но увидим
 одинаковые файлы в контейнерах. Вообще если использовать mount, то все более прозрачно и понятно, хотя более длинно в написании
